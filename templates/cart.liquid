{% comment %}
  Cart Template
  Shows cart items with quantity controls and checkout
{% endcomment %}

<!-- Breadcrumb -->
{% render 'breadcrumb', current: 'Shopping Cart' %}

<!-- Cart Content -->
<section class="cart-section">
  <div class="page-width">
    {% if cart.item_count > 0 %}
      <form action="/cart" method="post" class="cart-layout">
        <div class="cart-items">
          {% for item in cart.items %}
            <div class="cart-item">
              <div class="cart-item__image">
                {% if item.image %}
                  <a href="{{ item.url }}">
                    <img src="{{ item.image | image_url: width: 200 }}" alt="{{ item.title }}">
                  </a>
                {% else %}
                  <div class="cart-item__placeholder">
                    <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    </svg>
                  </div>
                {% endif %}
              </div>
              <div class="cart-item__info">
                <h3 class="cart-item__title">
                  <a href="{{ item.url }}">{{ item.product.title }}</a>
                </h3>
                {% unless item.variant.title == 'Default Title' %}
                  <p class="cart-item__variant">{{ item.variant.title }}</p>
                {% endunless %}
                <p class="cart-item__price-mobile">{{ item.price | money }}</p>
              </div>
              <div class="cart-item__price">{{ item.price | money }}</div>
              <div class="cart-item__qty">
                <input type="number" name="updates[]" value="{{ item.quantity }}" min="0" class="cart-item__qty-input">
              </div>
              <div class="cart-item__total">{{ item.line_price | money }}</div>
              <a href="/cart/change?line={{ forloop.index }}&amp;quantity=0" class="cart-item__remove" aria-label="Remove">
                <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </a>
            </div>
          {% endfor %}
        </div>

        <div class="cart-summary">
          <div class="cart-summary__card">
            <h3 class="cart-summary__title">Order Summary</h3>
            <div class="cart-summary__row">
              <span>Subtotal</span>
              <span>{{ cart.total_price | money }}</span>
            </div>
            <div class="cart-summary__row">
              <span>Shipping</span>
              <span>Calculated at checkout</span>
            </div>
            <div class="cart-summary__divider"></div>
            <div class="cart-summary__row cart-summary__row--total">
              <span>Total</span>
              <span>{{ cart.total_price | money }}</span>
            </div>
            <button type="submit" name="update" class="button button--outline cart-summary__btn">Update Cart</button>
            <button type="submit" name="checkout" class="button button--primary cart-summary__btn">Checkout</button>
            <a href="/collections/home-miners" class="cart-summary__continue">
              <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
              </svg>
              Continue Shopping
            </a>
          </div>
        </div>
      </form>
    {% else %}
      <div class="cart-empty">
        <div class="cart-empty__icon">
          <svg width="56" height="56" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
            <circle cx="9" cy="21" r="1"></circle>
            <circle cx="20" cy="21" r="1"></circle>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
          </svg>
        </div>
        <h2 class="cart-empty__title">Your cart is empty</h2>
        <p class="cart-empty__text">Add some products to get started</p>
        <a href="/collections/home-miners" class="button button--primary">Start Shopping</a>
      </div>
    {% endif %}
  </div>
</section>
